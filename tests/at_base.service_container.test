<?php

class At_Base_Container_TestCase extends DrupalWebTestCase {
  public function getInfo() {
    return array(
      'name' => 'AT Base: Service Container',
      'description' => 'Make sure Service Container is working correctly.',
      'group' => 'AT Base',
    );
  }

  public function setUp() {
    parent::setUp('atest_base');
  }

  public function testServiceContainer() {
    // Simple service
    $service_1 = at_container('atest_base.service_1');
    $this->assertEqual('Drupal\atest_base\Service_1', get_class($service_1));

    // Service depends on others
    $service_2 = at_container('atest_base.service_2');
    $this->assertEqual('Drupal\atest_base\Service_2', get_class($service_2));
    $this->assertEqual('Drupal\atest_base\Service_1', get_class($service_2->getService1()));

    // Service use factory
    $service_3 = at_container('atest_base.service_3');
    $this->assertEqual('Drupal\atest_base\Service_3', get_class($service_3));
  }
}
