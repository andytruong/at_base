services:
  container:
    class: '\Drupal\at_base\Container'
    factory_class: 'AT'
    factory_method: getContainer

  controller.resolver:
    class: '\Drupal\at_base\Helper\Controller_Resolver'

  # ---------------------
  # Config
  # ---------------------
  expression_language:
    class: 'Symfony\Component\ExpressionLanguage\ExpressionLanguage'
    factory_class: 'AT'
    factory_method: getExpressionLanguage

  # ---------------------
  # Theming services
  # ---------------------
  twig.core:
    class: '\Twig_Environment'
    factory_class: '\Drupal\at_base\Twig\Environment_Factory'
    factory_method: getObject

  twig:
    class: '\Twig_Environment'
    factory_class: '\Drupal\at_base\Twig\Environment_Factory'
    factory_method: getFileService
    arguments: ['@twig.core']

  twig_string:
    class: '\Twig_Environment'
    factory_class: '\Drupal\at_base\Twig\Environment_Factory'
    factory_method: getStringService
    arguments: ['@twig.core']

  twig_controller:
    class: 'Drupal\at_base\Helper\Controller_Resolver\Twig_Controller'
    arguments: ['@twig_string']

  # ---------------------
  # Cache
  # ---------------------
  cache.tag_discover:
    class: 'Drupal\at_base\Cache\Warming\Tag_Discover'

  cache.warmer:
    class: 'Drupal\at_base\Cache\Warming\Warmer'
    arguments: ['@cache.tag_discover']

  cache.warmer.entity:
    class: 'Drupal\at_base\Cache\Warmer\Entity'

  cache.warmer.view:
    class: 'Drupal\at_base\Cache\Warmer\View'

  # ---------------------
  # Helpers
  # ---------------------
  helper.content_render:
    class: 'Drupal\at_base\Helper\Content_Render'

  helper.real_path:
    class: 'Drupal\at_base\Helper\Real_Path'

  helper.timer:
    class: 'Drupal\at_base\Helper\Timer'
